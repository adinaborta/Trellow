-- Table: public.user

-- DROP TABLE IF EXISTS public."user";

CREATE TABLE IF NOT EXISTS public."user"
(
    user_id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    password character varying COLLATE pg_catalog."default" NOT NULL,
    email character varying COLLATE pg_catalog."default" NOT NULL,
    username character varying COLLATE pg_catalog."default" NOT NULL,
    name character varying COLLATE pg_catalog."default",
    CONSTRAINT user_pkey PRIMARY KEY (user_id),
	UNIQUE (email)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public."user"
    OWNER to postgres;


-- Table: public.board

-- DROP TABLE IF EXISTS public.board;

CREATE TABLE IF NOT EXISTS public.board
(
    board_id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    user_id integer NOT NULL,
    title character varying COLLATE pg_catalog."default" NOT NULL,
    description character varying COLLATE pg_catalog."default",
    color character varying COLLATE pg_catalog."default",
    image character varying COLLATE pg_catalog."default",
    created_time timestamp with time zone,
    CONSTRAINT board_pkey PRIMARY KEY (board_id),
    CONSTRAINT user_id FOREIGN KEY (user_id)
        REFERENCES public."user" (user_id) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.board
    OWNER to postgres;


-- Table: public.user_board

-- DROP TABLE IF EXISTS public.user_board;

CREATE TABLE IF NOT EXISTS public.user_board
(
    user_board_id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    user_id integer NOT NULL,
    board_id integer NOT NULL,
    role character varying COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT user_board_pkey PRIMARY KEY (user_board_id),
    CONSTRAINT board_id FOREIGN KEY (board_id)
        REFERENCES public.board (board_id) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE,
    CONSTRAINT user_id FOREIGN KEY (user_id)
        REFERENCES public."user" (user_id) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.user_board
    OWNER to postgres;
-- Index: fki_user_id

-- DROP INDEX IF EXISTS public.fki_user_id;

CREATE INDEX IF NOT EXISTS fki_user_id
    ON public.user_board USING btree
    (user_id ASC NULLS LAST)
    TABLESPACE pg_default;




-- Table: public.list

-- DROP TABLE IF EXISTS public.list;

CREATE TABLE IF NOT EXISTS public.list
(
    list_id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    board_id integer NOT NULL,
    title character varying COLLATE pg_catalog."default" NOT NULL,
    color character varying COLLATE pg_catalog."default",
    created_time timestamp with time zone,
    CONSTRAINT list_pkey PRIMARY KEY (list_id),
    CONSTRAINT board_id FOREIGN KEY (board_id)
        REFERENCES public.board (board_id) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.list
    OWNER to postgres;
-- Index: fki_board_id

-- DROP INDEX IF EXISTS public.fki_board_id;

CREATE INDEX IF NOT EXISTS fki_board_id
    ON public.list USING btree
    (board_id ASC NULLS LAST)
    TABLESPACE pg_default;


-- Table: public.card

-- DROP TABLE IF EXISTS public.card;

CREATE TABLE IF NOT EXISTS public.card
(
    card_id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    list_id integer NOT NULL,
    title character varying COLLATE pg_catalog."default" NOT NULL,
    description character varying COLLATE pg_catalog."default",
    color character varying COLLATE pg_catalog."default",
    image character varying COLLATE pg_catalog."default",
    created_time timestamp with time zone,
    CONSTRAINT item_pkey PRIMARY KEY (card_id),
    CONSTRAINT list_id FOREIGN KEY (list_id)
        REFERENCES public.list (list_id) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.card
    OWNER to postgres;
-- Index: fki_list_id

-- DROP INDEX IF EXISTS public.fki_list_id;

CREATE INDEX IF NOT EXISTS fki_list_id
    ON public.card USING btree
    (list_id ASC NULLS LAST)
    TABLESPACE pg_default;

-- Table: public.property

-- DROP TABLE IF EXISTS public.property;

CREATE TABLE IF NOT EXISTS public.property
(
    property_id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    board_id integer NOT NULL,
    type character varying COLLATE pg_catalog."default" NOT NULL,
    title character varying COLLATE pg_catalog."default" NOT NULL,
    value character varying COLLATE pg_catalog."default",
    CONSTRAINT property_pkey PRIMARY KEY (property_id),
    CONSTRAINT board_id FOREIGN KEY (board_id)
        REFERENCES public.board (board_id) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE CASCADE
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.property
    OWNER to postgres;